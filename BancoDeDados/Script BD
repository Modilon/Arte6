create database arte6;

CREATE TABLE usuario (
	id_usuario int4 NOT NULL,
	email varchar(60) NOT NULL,
	senha varchar(255) NOT NULL,
	login varchar(255) NOT NULL,
	datanasc timestamp NULL,
	nacionalidade varchar(60) NULL,
	descricao   VARCHAR(255) not null,
	dataRegUser timestamp not null,
	CONSTRAINT loginuniqueconstraint UNIQUE (login),
	CONSTRAINT usuario_pkey PRIMARY KEY (id_usuario)
);

create table HABILIDADE(
						ID_HABILIDADE int primary key not null,
						NOME_HABILIDADE VARCHAR(60) not null
);

create table USUARIO_HABILIDADES(
						ID_HABILIDADE int,
						   foreign key (ID_HABILIDADE) references HABILIDADE (ID_HABILIDADE),
						ID_USUARIO int,
                           foreign key (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE PUBLICACAO(
                           ID_PUBLI	int PRIMARY KEY NOT NULL,
                           TITL_PUBLI	VARCHAR(60) NOT NULL,
                           DESC_PUBLI		VARCHAR(255) NOT NULL,
                           COMENTARIO		VARCHAR(255) NOT NULL,
                           NOTA_AVAL		INT	NOT NULL,
                           DH_INCL			TIMESTAMP,
                           ID_USUARIO int,
                           foreign key (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE CATEGORIA(
                          ID_CAT int PRIMARY KEY NOT NULL,
                          NOME_CAT	VARCHAR(60)
);

CREATE TABLE PORTFOLIO(
                          ID_PORTF int PRIMARY KEY NOT NULL,
                          TITL_PORTF		VARCHAR(60) NOT NULL,
                          DESC_PORTF		VARCHAR(255) NOT NULL,
                          STATUS_PORTF	BOOLEAN NOT NULL,
                          VALOR			FLOAT NOT NULL,
                          ID_USUARIO int,
                          foreign key (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO),
                          ID_PUBLI int,
                          foreign key (ID_PUBLI) REFERENCES PUBLICACAO(ID_PUBLI),
                          ID_CAT int,
                          foreign key (ID_CAT) REFERENCES CATEGORIA(ID_CAT)
);

CREATE TABLE IMAGEM(
                       ID_IMG int PRIMARY KEY NOT NULL,
                       NOME_IMG	VARCHAR(60)	NOT NULL,
                       DESC_IMG	VARCHAR(255) NOT NULL,
                       ID_PORTF int,
                       foreign key (ID_PORTF) REFERENCES PORTFOLIO(ID_PORTF)
);
